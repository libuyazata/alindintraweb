
<div class="main-content">
                <div class="section__content section__content--p15">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-12">
								<div class="overview-wrap">
                                    <h2 class="title-1">Work Management</h2>
									
							   </div>
                            </div>
                        </div>
                        <div class="row m-t-25">
                            <div class="col-lg-12 search-container">
									<form novalidate [formGroup]="materialRequestSearchForm" (ngSubmit)="onWorkDetailsSearched();">
										<div class="row">
											<div class="col-lg-2">
												<div class="search-label-container"><label>Search</label></div>
												<input formControlName="searchKeyWord" class="form-control" placeholder="Search Work"/>  
											</div> 
											<div class="col-lg-2">
											<div class="search-label-container"><label>Type</label></div>
											<select class="form-control" formControlName="workTypeId">
												<option value="0" [selected] ="true">All</option>  
												<option *ngFor="let work of workTypeList" [ngValue]="work.workTypeId">{{work.workType}}</option>
											</select> 
											</div>
											<div class="col-lg-2">
												<div class="search-label-container"><label>Start Date</label></div>
												<input formControlName="dateFrom" class="form-control"  type="date"/>  
											</div>
											<div class="col-lg-2">
												<div class="search-label-container"><label>End Date</label></div>
												<input formControlName="dateTo" class="form-control" type="date" />  
											</div>
											 
											<div class="col-lg-4 pt-4">                    
												<span class="float-left">
													<button class="btn btn-info" type="submit">Search</button>  
													<button class="btn btn-danger" type="reset" (click)="clearForm()">Clear</button>
													<button (click)="openCreateForm()" class="btn btn-info" style="background:#C70039;" type="button">Create {{itemName}}</button>  

											<!-- <a class="link" [routerLink]="['/work-details/']">
												<button class="btn btn-success ml-0" type="button">Manage Work</button>
											</a> -->
											</span>
											</div> 
										</div>
									</form> 
							</div>
							</div>
							<div class="row m-t-25">
							<div class="col-sm-6 col-lg-3 tip" *ngFor="let item of presentWorkList | paginate: {itemsPerPage: 12,currentPage: page,totalItems: totalItems};index as i;">

                                <a class="link" [routerLink]="['/work-view/']" [queryParams]="{id:item.workDetailsId}" class="tip">

								<div class="overview-item overview-item--c1 boxx{{(i+1)%9}}" >
                                    <div class="overview__inner">
                                         <div class="overview-box clearfix">
										   <div class="text">
                                            <span class="btn-icon btn-icon-round btn-icon-lg-alt">
												<h1><span class="fa fa-puzzle-piece"></span></h1>
											</span>
                                            <div class="box-info float-right">
												<span class="float-right">{{item.workName}}</span>
											</div>
                                        </div>
                                        <div class="overview-chart">
                                            <canvas id="widgetChart1"></canvas>
                                        </div>
										</div>
                                    </div>
                                </div>
<p>
Tag:  {{item.workName}}<br>
Description:  {{item.description}}<br>
Client:  <br>
Started On:  {{item.startDate  | date :  "dd-MM-yyyy"}}<br>
Co Ordinator:  {{item.projectCoOrdinatorName}}</p>
								</a>
                            </div>
                    </div>
					<div class="row m-t-10" *ngIf="isPaginationVisible==true">
							<pagination-controls (pageChange)="getpresentWorkListPage(page = $event)"></pagination-controls>
					</div>
				</div>
            </div> 
				
	</div>

<!-- Create/Update Form [BEGIN]-->
<div class="modal" [ngClass]="{ 'd-block' : isFormVisible}" id="createUpdateModal" *ngIf="isFormVisible">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">{{isEdit ? ('Update ' +itemName)  : ('Create ' +itemName)}}</h5>
                <button class="close" type="button" data-dismiss="modal" appModal  (click)="closePopup();">&times;</button>
            </div>
            <div class="modal-body">
                <form novalidate [formGroup]="addItemForm" (ngSubmit)="onAddItem();">
                    <div class="col-lg-12">
                        <div><label>{{itemName}} :</label></div>
                        <input class="form-control mandatory-field" formControlName="workName" type="text" 
                        [ngClass]="{ 'is-invalid': isFormSubmitInitiated && itemForm.workName.errors }"/>
                        <div *ngIf="isFormSubmitInitiated && itemForm.workName.errors" style="color:red;">Please enter a name.</div>
                    </div>

                    <div class="col-lg-12">
                        <div><label>Description : </label></div>
                        <textarea class="form-control mandatory-field" formControlName="description"  type="text" maxlength="400"
                        [ngClass]="{ 'is-invalid': isFormSubmitInitiated && itemForm.description.errors }"></textarea>

                        <div *ngIf="isFormSubmitInitiated && itemForm.description.errors" style="color:red;">Please enter description.</div>
                    </div>
					<div class="col-lg-12">
                        <div><label>Type : </label></div>
                        <select class="form-control" formControlName="workTypeId">
                        <option *ngFor="let work of workTypeList" [ngValue]="work.workTypeId">{{work.workType}}</option>
                         </select> 
                        <div *ngIf="isFormSubmitInitiated && itemForm.workTypeId.errors" style="color:red;">Please select Work Type</div>
                    </div>
					<div class="col-lg-12">
                        <div><label>Department : </label></div>
                        <select class="form-control" formControlName="departmentId" (change)="getEmployeeListbyDept($event);">
                        <option *ngFor="let department of departmentList" [value]="department.departmentId">{{department.departmentName}}</option>
                         </select> 
                        <div *ngIf="isFormSubmitInitiated && itemForm.departmentId.errors" style="color:red;">Please select Department</div>
                    </div>
					<div class="col-lg-12">
                        <div><label>Employee : </label></div>
                        <select class="form-control" formControlName="projectCoOrdinatorEmpId">
                        <option *ngFor="let employee of employeeList" [ngValue]="employee.employeeId">{{employee.firstName}}</option>
                         </select> 
                        <div *ngIf="isFormSubmitInitiated && itemForm.projectCoOrdinatorEmpId.errors" style="color:red;">Please select Employee</div>
                    </div>
					<div class="col-lg-12">
                        <div><label>Work Status : </label></div>
                        <select class="form-control" formControlName="workStatusId">
                        <option *ngFor="let workStatus of workStatusList" [ngValue]="workStatus.workStatusId">{{workStatus.workStatusName}}</option>
                         </select> 
                        <div *ngIf="isFormSubmitInitiated && itemForm.workStatusId.errors" style="color:red;">Please select Work Status</div>
                    </div>
					<div class="col-lg-12">
                        <div><label>Start Date : </label></div>
                        <input formControlName="startDate" class="form-control"  type="date"/>  
                        <input formControlName="workDetailsId" class="form-control"  type="hidden"/>  
                        <input formControlName="createdOn" class="form-control"  type="hidden"/>  
                        <input formControlName="updatedOn" class="form-control"  type="hidden"/>  
						<div *ngIf="isFormSubmitInitiated && itemForm.startDate.errors" style="color:red;">Please select Start Date</div>
                    </div>
					<div class="col-lg-12">
                        <div><label>End Date : </label></div>
                        <input formControlName="endDate" class="form-control"  type="date"/>  
<!--                         <div *ngIf="isFormSubmitInitiated && itemForm.endDate.errors" style="color:red;">Please select End Date</div>
 -->						<div *ngIf="isFormSubmitInitiated && itemForm.endDate.invalid" style="color:red;">End Date should be greater than or equal to Start date</div>
					</div>

                    <div class="col-lg-12 form-group" style="margin-top: 20px;">
                        <button class="btn btn-primary" type="submit">Save</button>
                        <button class="btn btn-danger" *ngIf=" ! isEdit" (click)="resetForm()"  type="reset">Clear</button>     
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Create/Update Form [END]-->
